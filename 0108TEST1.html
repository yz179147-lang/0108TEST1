<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸‰å¹´ç´šæ•¸å­¸ç´ é¤ŠæŒ‘æˆ°è³½</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');

        :root {
            --primary-color: #4CAF50;
            --secondary-color: #2196F3;
            --accent-color: #FF9800;
            --bg-color: #f0f8ff;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            /* é˜²æ­¢ iOS é»æ“Šé«˜äº® */
            -webkit-tap-highlight-color: transparent; 
        }

        .container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 800px;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            /* å¹³æ¿å„ªåŒ–ï¼šå¢åŠ åº•éƒ¨ç©ºé–“ */
            padding-bottom: 50px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 4px solid #ffcc00;
            padding-bottom: 10px;
            display: inline-block;
            width: 100%;
        }

        /* é€²åº¦æ¢å„ªåŒ– */
        .progress-container {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }

        .progress-label {
            font-size: 0.9em;
            font-weight: bold;
            color: #666;
            margin-right: 10px;
            white-space: nowrap;
        }

        .progress-bar {
            flex-grow: 1;
            background-color: #eee;
            border-radius: 20px;
            height: 15px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #66bb6a, #43a047);
            width: 0%;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 20px;
        }

        /* é¡Œçµ„æƒ…å¢ƒå€å¡Š */
        .scenario-box {
            background-color: #e3f2fd;
            border-left: 6px solid var(--secondary-color);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            font-size: 1.15em;
            line-height: 1.7;
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .scenario-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 5px;
        }

        .scenario-icon {
            width: 50px;
            height: 50px;
            flex-shrink: 0;
            background-color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .scenario-icon svg {
            width: 30px;
            height: 30px;
            fill: var(--secondary-color);
        }

        .scenario-title {
            font-weight: bold;
            color: #1565C0;
            font-size: 1.3em;
        }

        /* æƒ…å¢ƒåœ–ç‰‡æ¨£å¼ */
        .scenario-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            background-color: #f5f5f5; /* åœ–ç‰‡è¼‰å…¥å‰çš„åº•è‰² */
            display: block;
        }

        /* é¡Œç›®å¡ç‰‡å„ªåŒ– */
        .question-card {
            background-color: #fffde7;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            border: 2px solid #fff59d;
            transition: transform 0.2s;
        }

        .question-card:focus-within {
            border-color: var(--accent-color);
            transform: scale(1.01);
        }

        .question-text {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
            display: block;
            color: #444;
        }

        .point-badge {
            display: inline-block;
            background-color: #fff59d;
            color: #f57f17;
            font-size: 0.8em;
            padding: 2px 8px;
            border-radius: 10px;
            border: 1px solid #fbc02d;
            margin-left: 10px;
            vertical-align: middle;
        }

        /* è¼¸å…¥æ¡†è§¸æ§å„ªåŒ– */
        input[type="text"] {
            width: 100%;
            padding: 15px;
            margin-top: 5px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            box-sizing: border-box;
            background-color: white;
            transition: border-color 0.3s;
            -webkit-appearance: none;
        }

        input[type="text"]:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        /* æŒ‰éˆ•è§¸æ§å„ªåŒ– */
        .btn {
            display: block;
            width: 100%;
            padding: 18px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 30px;
            transition: transform 0.1s, background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            user-select: none;
            -webkit-user-select: none;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-next {
            background-color: var(--secondary-color);
            display: none;
        }

        .feedback {
            margin-top: 15px;
            font-weight: bold;
            padding: 15px;
            border-radius: 10px;
            display: none;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .correct {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }

        .incorrect {
            background-color: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }

        .note {
            font-size: 0.9em;
            color: #757575;
            margin-top: 8px;
            font-style: italic;
            background-color: rgba(255,255,255,0.5);
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }

        /* çµæœç•«é¢ */
        .result-screen {
            text-align: center;
            display: none;
            padding: 20px;
        }

        .score-display {
            font-size: 4em;
            font-weight: bold;
            color: var(--secondary-color);
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .badge {
            font-size: 6em;
            margin-bottom: 20px;
            display: inline-block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-20px);}
            60% {transform: translateY(-10px);}
        }

        /* RWD èª¿æ•´ */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
                border-radius: 15px;
            }
            h1 { font-size: 1.5em; }
            .scenario-box { padding: 15px; font-size: 1em; }
            .scenario-icon { width: 40px; height: 40px; }
            .scenario-icon svg { width: 20px; height: 20px; }
            .scenario-image { height: 180px; } /* æ‰‹æ©Ÿç‰ˆåœ–ç‰‡é«˜åº¦æ¸›å° */
            .btn { font-size: 1.1em; padding: 15px; }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="quiz-screen">
        <h1>ğŸ”¢ ä¸‰å¹´ç´šæ•¸å­¸ç´ é¤ŠæŒ‘æˆ°</h1>
        
        <div class="progress-container">
            <span class="progress-label" id="progress-text">Level 1/10</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progress"></div>
            </div>
        </div>

        <div id="quiz-content">
            <!-- é¡Œç›®å…§å®¹å°‡ç”± JavaScript å‹•æ…‹è¼‰å…¥ -->
        </div>

        <button class="btn" id="submit-btn" onclick="checkAnswers()">é€å‡ºç­”æ¡ˆ</button>
        <button class="btn btn-next" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œçµ„ â”</button>
    </div>

    <div id="result-screen" class="result-screen">
        <div class="badge" id="result-badge">ğŸ†</div>
        <h2 style="color: #444; margin-bottom: 10px;">æ¸¬é©—å®Œæˆï¼</h2>
        <p style="font-size: 1.2em; color: #666;">ä½ çš„ç¸½å¾—åˆ†æ˜¯ï¼š</p>
        <div class="score-display" id="final-score">0 / 100</div>
        <p id="result-comment" style="font-size: 1.3em; font-weight: bold; color: #FF9800; margin-bottom: 40px;">åšå¾—å¤ªæ£’äº†ï¼</p>
        <button class="btn" onclick="location.reload()" style="background-color: var(--primary-color);">å†æŒ‘æˆ°ä¸€æ¬¡</button>
    </div>
</div>

<script>
    // SVG Icons
    const icons = {
        lock: `<svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>`,
        drink: `<svg viewBox="0 0 24 24"><path d="M20 2H4v20h16V2zm-9 6H6v-2h5v2zm0 4H6v-2h5v2zm0 4H6v-2h5v2zm7-8h-5v-2h5v2zm0 4h-5v-2h5v2zm0 4h-5v-2h5v2zM3 22h18v2H3z"/></svg>`,
        road: `<svg viewBox="0 0 24 24"><path d="M12 2L4 22h16L12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>`, 
        book: `<svg viewBox="0 0 24 24"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>`,
        bucket: `<svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-3.31-2.69-6-6-6s-6 2.69-6 6c0 .33.02.64.06.94L4.78 12C4.34 10.74 4 9.4 4 8c0-4.42 3.58-8 8-8s8 3.58 8 8c0 1.4-.34 2.74-.78 4l-2.08.94zM12 4c-2.21 0-4 1.79-4 4 0 1.8 1.18 3.32 2.8 3.82L12 11l1.2.82C14.82 11.32 16 9.8 16 8c0-2.21-1.79-4-4-4z"/><path d="M2 12v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-9l-10-4-10 4z"/></svg>`, 
        ticket: `<svg viewBox="0 0 24 24"><path d="M13 13v8h8v-8h-8zM3 21h8v-8H3v8zM3 3v8h8V3H3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65z"/></svg>`,
        soup: `<svg viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6 10H6v-2h8v2zm4-4H6v-2h12v2z"/></svg>`, 
        chest: `<svg viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/></svg>`,
        bottle: `<svg viewBox="0 0 24 24"><path d="M15.5 19.1l-2.8-8.4c-.4-1.2-1-1.7-2.1-1.7H9.4c-1.1 0-1.7.5-2.1 1.7l-2.8 8.4c-.2.6.2 1.3.9 1.3h9.2c.6 0 1.1-.7.9-1.3zM18 5H6C4.9 5 4 5.9 4 7v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-6 8h-2v-2h2v2zm0-4h-2V7h2v2z"/></svg>`,
        ruler: `<svg viewBox="0 0 24 24"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z"/></svg>`
    };

    // é¡Œç›®è³‡æ–™åº«
    const quizData = [
        {
            title: "é¡Œçµ„ä¸€ï¼šå¤å ¡çš„å¯†ç¢¼é–",
            icon: icons.lock,
            image: "https://images.unsplash.com/photo-1599596398939-f9c47c231709?auto=format&fit=crop&w=600&q=80",
            story: "æ¢éšªéšŠä¾†åˆ°ä¸€åº§å¤å ¡ï¼Œå¤§é–€ä¸Šæ›è‘—ä¸€å€‹ç¥ç¥•çš„å››ä½æ•¸å¯†ç¢¼é–ã€‚é–æ—åˆ»è‘—ä¸€æ®µè¬é¡Œï¼šã€Œæ‰“é–‹æˆ‘çš„äººï¼Œå¿…é ˆè§£é–‹æ•¸å­—çš„å¥§ç¥•ã€‚ã€<br>ç‰†ä¸Šä¾åºå¯«è‘—ä¸‰æ¢è¨Šæ¯ï¼š<br>1. é€™å€‹å¯†ç¢¼æ˜¯ä¸€å€‹å››ä½æ•¸ï¼Œä¸”æ•¸å­—æ¯” 5000 å¤§ã€‚<br>2. å®ƒçš„åƒä½æ•¸æ˜¯ 6ï¼Œå€‹ä½æ•¸æ˜¯ 0ã€‚<br>3. å®ƒçš„ç™¾ä½æ•¸æ˜¯åƒä½æ•¸çš„ä¸€åŠï¼Œè€Œåä½æ•¸æ¯”ç™¾ä½æ•¸é‚„è¦å¤§ 2ã€‚",
            questions: [
                { text: "1. æ ¹æ“šç‰†ä¸Šçš„è¨Šæ¯ï¼Œè«‹å•é€™å€‹å¯†ç¢¼çš„ç™¾ä½æ•¸æ˜¯å¤šå°‘ï¼Ÿ", answer: "3", type: "number" },
                { text: "2. æ ¹æ“šç‰†ä¸Šçš„è¨Šæ¯ï¼Œè«‹å•é€™å€‹å¯†ç¢¼çš„åä½æ•¸æ˜¯å¤šå°‘ï¼Ÿ", answer: "5", type: "number" },
                { text: "3. è«‹å¯«å‡ºé€™çµ„æ­£ç¢ºçš„å››ä½æ•¸å¯†ç¢¼ã€‚", answer: "6350", type: "number" }
            ]
        },
        {
            title: "é¡Œçµ„äºŒï¼šé£²æ–™åº—çš„è¶…ç´šæ¡¶",
            icon: icons.drink,
            image: "https://images.unsplash.com/photo-1543253687-c59975471a12?auto=format&fit=crop&w=600&q=80",
            story: "å¤å¤©åˆ°äº†ï¼Œã€Œæ¸…æ¶¼é£²æ–™åº—ã€æ¨å‡ºäº†å…©ç¨®ä¸åŒå®¹é‡çš„å®¹å™¨ã€‚<br>â— è¶…ç´šæ¡¶ï¼šå®¹é‡æ¨™ç¤ºç‚º 2 å…¬å‡ã€‚<br>â— åˆ†äº«ç“¶ï¼šå®¹é‡æ¨™ç¤ºç‚º 450 æ¯«å‡ã€‚<br>åº—é•·æ­£åœ¨èˆ‰è¾¦ä¿ƒéŠ·æ´»å‹•ï¼Œä»–æŠŠä¸€æ¡¶è£æ»¿çš„ã€Œè¶…ç´šæ¡¶ã€é£²æ–™ï¼Œå€’æ»¿äº† 3 ç“¶ã€Œåˆ†äº«ç“¶ã€è«‹ç¾å ´çš„é¡§å®¢è©¦å–ã€‚",
            questions: [
                { text: "1. è«‹å•ä¸€æ¡¶ã€Œè¶…ç´šæ¡¶ã€çš„å®¹é‡ï¼Œç›¸ç•¶æ–¼å¤šå°‘æ¯«å‡ï¼Ÿ(å¡«æ•¸å­—)", answer: "2000", type: "number" },
                { text: "2. åº—é•·å€’å‡ºäº† 3 ç“¶åˆ†äº«ç“¶å¾Œï¼Œç¸½å…±å€’å‡ºäº†å¤šå°‘æ¯«å‡çš„é£²æ–™ï¼Ÿ(å¡«æ•¸å­—)", answer: "1350", type: "number" },
                { text: "3. å€’å®Œé€™ 3 ç“¶å¾Œï¼Œè¶…ç´šæ¡¶è£¡é¢é‚„å‰©ä¸‹å¤šå°‘æ¯«å‡çš„é£²æ–™ï¼Ÿ(å¡«æ•¸å­—)", answer: "650", type: "number" }
            ]
        },
        {
            title: "é¡Œçµ„ä¸‰ï¼šé«˜é€Ÿå…¬è·¯çš„é‡Œç¨‹ç‰Œ",
            icon: icons.road,
            image: "https://images.unsplash.com/photo-1565514020176-db93122c938d?auto=format&fit=crop&w=600&q=80",
            story: "é™³å”å”é–‹è²¨è»Šé€è²¨ï¼Œè¡Œé§›åœ¨ä¸€æ¢ç­†ç›´çš„é«˜é€Ÿå…¬è·¯ä¸Šã€‚é€™æ¢å…¬è·¯çš„é‡Œç¨‹ç‰Œæ•¸å­—è¶Šå¾€å—èµ°æœƒè¶Šå¤§ã€‚<br>â— ä¸Šåˆ 10:00ï¼Œé™³å”å”ç¶“éäº†æ¨™ç¤º 3050 çš„è·¯ç‰Œã€‚<br>â— ä¸Šåˆ 11:00ï¼Œé™³å”å”ç¶“éäº†æ¨™ç¤º 3145 çš„è·¯ç‰Œã€‚<br>é™³å”å”é è¨ˆè¦åœ¨æ¨™ç¤º 3200 çš„ä¼‘æ¯ç«™åœè»Šåƒåˆé¤ã€‚",
            questions: [
                { text: "1. å¾ä¸Šåˆ 10:00 åˆ° 11:00 é€™æ®µæ™‚é–“ï¼Œé™³å”å”çš„è»Šå­è¡Œé§›äº†å¤šå°‘å…¬é‡Œï¼Ÿ", answer: "95", type: "number" },
                { text: "2. ç•¶è»Šå­åˆ°é” 3145 çš„è·¯ç‰Œæ™‚ï¼Œè·é›¢é™³å”å”æƒ³å»çš„ä¼‘æ¯ç«™é‚„æœ‰å¤šå°‘å…¬é‡Œï¼Ÿ", answer: "55", type: "number" },
                { text: "3. å¦‚æœé™³å”å”ä¸å°å¿ƒé–‹éé ­ï¼Œçœ‹åˆ°äº†æ¨™ç¤º 3210 çš„è·¯ç‰Œï¼Œè«‹å•ä»–ç¾åœ¨çš„ä½ç½®æ˜¯åœ¨ä¼‘æ¯ç«™çš„å—æ–¹é‚„æ˜¯åŒ—æ–¹ï¼Ÿ", answer: "å—æ–¹", type: "text", note: "æç¤ºï¼šæ•¸å­—è¶Šå¾€å—è¶Šå¤§ï¼Œ3210æ¯”3200å¤§" }
            ]
        },
        {
            title: "é¡Œçµ„å››ï¼šåœ–æ›¸é¤¨çš„æ›¸ç±æ­¸ä½",
            icon: icons.book,
            image: "https://images.unsplash.com/photo-1521587760476-6c12a4b040da?auto=format&fit=crop&w=600&q=80",
            story: "åœ–æ›¸é¤¨å“¡å°ç¾æ­£åœ¨æ•´ç†ã€Œç§‘å­¸é¡ã€çš„æ›¸æ¶ã€‚é€™æ’æ›¸æ¶å°ˆé–€æ“ºæ”¾ç´¢æ›¸è™Ÿåœ¨ 5000 åˆ° 6000 ä¹‹é–“çš„æ›¸ç±ã€‚<br>ç¾åœ¨æ‰‹é‚Šæœ‰ä¸‰æœ¬å‰›é‚„å›ä¾†çš„æ›¸ï¼Œç´¢æ›¸è™Ÿåˆ†åˆ¥æ˜¯ï¼š<br>â— A æ›¸ï¼š5090<br>â— B æ›¸ï¼š5905<br>â— C æ›¸ï¼š5509",
            questions: [
                { text: "1. è«‹å°‡é€™ä¸‰æœ¬æ›¸çš„ç´¢æ›¸è™Ÿç”±å°åˆ°å¤§æ’åˆ—å‡ºä¾†ã€‚(è«‹å¡«ä»£è™Ÿï¼Œå¦‚ ABC)", answer: "ACB", type: "text" },
                { text: "2. å°ç¾ç™¼ç¾æ¶ä¸Šé‚„æœ‰ä¸€æœ¬èˆŠæ›¸ï¼Œç´¢æ›¸è™Ÿæ˜¯ 5â–¡00ã€‚å·²çŸ¥é€™æœ¬èˆŠæ›¸çš„è™Ÿç¢¼æ¯” A æ›¸å¤§ï¼Œä½†æ¯” C æ›¸å°ã€‚è«‹å• â–¡ è£¡é¢çš„æ•¸å­—å¯èƒ½æ˜¯å“ªäº›ï¼Ÿ(è«‹å¯«å‡ºæ‰€æœ‰æ•¸å­—ï¼Œä¸ç”¨ç©ºæ ¼ï¼Œå¦‚ 123)", answer: "1234", type: "text", note: "æç¤ºï¼šå¤§æ–¼5090ï¼Œå°æ–¼5500" },
                { text: "3. æ‰¿ä¸Šé¡Œï¼Œå¦‚æœé€™æœ¬èˆŠæ›¸çš„è™Ÿç¢¼æ¯” C æ›¸å°äº† 100 ä»¥ä¸Šï¼Œé‚£éº¼ â–¡ è£¡é¢çš„æ•¸å­—ç¢ºå®šæ˜¯å¤šå°‘ï¼Ÿ", answer: "4", type: "number" }
            ]
        },
        {
            title: "é¡Œçµ„äº”ï¼šå„²æ°´å¤§ä½œæˆ°",
            icon: icons.bucket,
            image: "https://images.unsplash.com/photo-1599156637379-3733224b7a0f?auto=format&fit=crop&w=600&q=80",
            story: "ç‚ºäº†å› æ‡‰åœæ°´é€šçŸ¥ï¼Œåª½åª½æ‹¿å‡ºäº†ä¸‰å€‹ä¸åŒé¡è‰²çš„æ°´æ¡¶ä¾†å„²æ°´ã€‚<br>â— ç´…æ¡¶ï¼šå®¹é‡ 2 å…¬å‡ 50 æ¯«å‡ã€‚<br>â— è—æ¡¶ï¼šå®¹é‡ 2500 æ¯«å‡ã€‚<br>â— ç¶ æ¡¶ï¼šå®¹é‡ 1950 æ¯«å‡ã€‚",
            questions: [
                { text: "1. è«‹å°‡ç´…æ¡¶çš„å®¹é‡æ›ç®—æˆæ¯«å‡ã€‚", answer: "2050", type: "number" },
                { text: "2. è«‹å•å“ªä¸€å€‹é¡è‰²çš„æ°´æ¡¶å®¹é‡æœ€å¤§ï¼Ÿ(è«‹å¡«é¡è‰²ï¼šç´…ã€è—æˆ–ç¶ )", answer: "è—", type: "text" },
                { text: "3. å¦‚æœåª½åª½å…ˆå°‡ç¶ æ¡¶è£æ»¿æ°´ï¼Œå†å…¨éƒ¨å€’å…¥ç©ºçš„ç´…æ¡¶è£¡ï¼Œè«‹å•ç´…æ¡¶é‚„å‰©ä¸‹å¤šå°‘æ¯«å‡çš„ç©ºé–“å¯ä»¥è£æ°´ï¼Ÿ", answer: "100", type: "number" }
            ]
        },
        {
            title: "é¡Œçµ„å…­ï¼šéŠæ¨‚åœ’çš„é›†é»å¡",
            icon: icons.ticket,
            image: "https://images.unsplash.com/photo-1532561917639-6f3434190c73?auto=format&fit=crop&w=600&q=80",
            story: "å¿«æ¨‚éŠæ¨‚åœ’æ¨å‡ºé›†é»æ›çå“æ´»å‹•ã€‚<br>â— ç´¯ç©æ»¿ 6000 é»ï¼šå¯å…Œæ›ä¸€éš»å·¨å‹æé¾ç©å¶ã€‚<br>â— ç´¯ç©æ»¿ 9000 é»ï¼šå¯å…Œæ›ä¸€å°å¹³æ¿é›»è…¦ã€‚<br>å“¥å“¥çš„é›†é»å¡ç›®å‰æœ‰ 5450 é»ï¼Œå¼Ÿå¼Ÿçš„é›†é»å¡æœ‰ 2800 é»ã€‚éŠæ¨‚åœ’è¦å®šç›´ç³»è¦ªå±¬çš„é»æ•¸å¯ä»¥åˆä½µè¨ˆç®—ã€‚",
            questions: [
                { text: "1. å“¥å“¥é‚„å·®å¤šå°‘é»ï¼Œå°±å¯ä»¥è‡ªå·±å–®ç¨å…Œæ›å·¨å‹æé¾ç©å¶ï¼Ÿ", answer: "550", type: "number" },
                { text: "2. å¦‚æœå…„å¼Ÿå…©äººçš„é»æ•¸åˆä½µï¼Œç¸½å…±æœ‰å¤šå°‘é»ï¼Ÿ", answer: "8250", type: "number" },
                { text: "3. æ‰¿ä¸Šé¡Œï¼Œå…©äººé»æ•¸åˆä½µå¾Œï¼Œè·é›¢å…Œæ›å¹³æ¿é›»è…¦é‚„å·®å¤šå°‘é»ï¼Ÿ", answer: "750", type: "number" }
            ]
        },
        {
            title: "é¡Œçµ„ä¸ƒï¼šç‡Ÿé¤Šåˆé¤çš„æ¹¯æ¡¶",
            icon: icons.soup,
            image: "https://images.unsplash.com/photo-1547592166-23ac45744acd?auto=format&fit=crop&w=600&q=80",
            story: "å»šæˆ¿é˜¿å§¨ç…®äº†ä¸€å¤§é‹ 9 å…¬å‡çš„ç´«èœè›‹èŠ±æ¹¯ï¼Œæº–å‚™åˆ†çµ¦ä¸‰å¹´ç´šçš„ä¸‰å€‹ç­ç´šã€‚<br>â— ç”²ç­æ´¾äººä¾†è£èµ°äº† 2 å…¬å‡ 500 æ¯«å‡ã€‚<br>â— ä¹™ç­æ´¾äººä¾†è£èµ°äº† 3 å…¬å‡ 200 æ¯«å‡ã€‚<br>â— å‰©ä¸‹çš„æ¹¯å…¨éƒ¨ç•™çµ¦ä¸™ç­ã€‚",
            questions: [
                { text: "1. ç”²ç­å’Œä¹™ç­ç¸½å…±è£èµ°äº†å¤šå°‘æ¯«å‡çš„æ¹¯ï¼Ÿ", answer: "5700", type: "number" },
                { text: "2. å¤§é‹å­è£¡æœ€å¾Œé‚„å‰©ä¸‹å¤šå°‘æ¯«å‡çš„æ¹¯å¯ä»¥çµ¦ä¸™ç­ï¼Ÿ", answer: "3300", type: "number" },
                { text: "3. å·²çŸ¥ä¸™ç­æœ‰ 30 ä½å­¸ç”Ÿï¼Œæ¯ä½å­¸ç”Ÿå¤§æ¦‚éœ€è¦å– 100 æ¯«å‡çš„æ¹¯ã€‚è«‹å•å‰©ä¸‹çš„æ¹¯å¤ ä¸å¤ ï¼Ÿ(è«‹å¡«ï¼šå¤ æˆ–ä¸å¤ )", answer: "å¤ ", type: "text" }
            ]
        },
        {
            title: "é¡Œçµ„å…«ï¼šæ¢éšªå®¶çš„å¯¶ç®±",
            icon: icons.chest,
            image: "https://images.unsplash.com/photo-1605632296089-9dd36072a452?auto=format&fit=crop&w=600&q=80",
            story: "æ¢éšªå®¶åœ¨æ²™æ¼ ä¸­æŒ–åˆ°äº†ä¸€å€‹å¯¶ç®±ï¼Œè£¡é¢è£æ»¿äº†å¤ä»£çš„éŒ¢å¹£ã€‚æ ¹æ“šå¤æ›¸è¨˜è¼‰ï¼š<br>â— 1 æšé‡‘å¹£ = 1000 å…ƒ<br>â— 1 æšéŠ€å¹£ = 100 å…ƒ<br>â— 1 æšéŠ…å¹£ = 10 å…ƒ<br>æ¢éšªå®¶æ¸…é»å¾Œç™¼ç¾ï¼Œå¯¶ç®±è£¡å…±æœ‰ï¼š4 æšé‡‘å¹£ã€15 æšéŠ€å¹£ å’Œ 6 æšéŠ…å¹£ã€‚",
            questions: [
                { text: "1. æ¢éšªå®¶æŠŠæ‰€æœ‰çš„ã€ŒéŠ€å¹£ã€æ‹¿å»å…Œæ›ï¼Œç¸½å…±åƒ¹å€¼å¤šå°‘å…ƒï¼Ÿ", answer: "1500", type: "number" },
                { text: "2. è«‹è¨ˆç®—å¯¶ç®±è£¡æ‰€æœ‰éŒ¢å¹£åŠ èµ·ä¾†çš„ç¸½åƒ¹å€¼æ˜¯å¤šå°‘å…ƒï¼Ÿ", answer: "5560", type: "number" },
                { text: "3. å¦‚æœæƒ³æŠŠé€™äº›éŒ¢æ›æˆã€Œæ•¸é‡æœ€å°‘ã€çš„ç¡¬å¹£çµ„åˆ(é€²ä½)ï¼Œä»–æ‡‰è©²æœƒæ“æœ‰å¹¾æšé‡‘å¹£ï¼Ÿ", answer: "5", type: "number" }
            ]
        },
        {
            title: "é¡Œçµ„ä¹ï¼šé‹å‹•é¸æ‰‹çš„æ°´å£º",
            icon: icons.bottle,
            image: "https://images.unsplash.com/photo-1602143407151-01114192003b?auto=format&fit=crop&w=600&q=80",
            story: "é¦¬æ‹‰æ¾é¸æ‰‹å°å‰›å¸¶äº†ä¸€å€‹å®¹é‡ 2 å…¬å‡çš„å¤§æ°´å£ºå»ç·´ç¿’ã€‚<br>ç·´ç¿’å‰ï¼Œä»–åœ¨æ°´å£ºè£¡è£äº† 1 å…¬å‡ 200 æ¯«å‡çš„æ°´ã€‚<br>ç·´ç¿’ä¸­ï¼Œä»–å–æ‰äº†ä¸€äº›æ°´ï¼Œç¾åœ¨æ°´å£ºè£¡åªå‰©ä¸‹ 500 æ¯«å‡çš„æ°´ã€‚<br>ç·´ç¿’çµæŸå¾Œï¼Œæ•™ç·´åˆå¹«ä»–åœ¨æ°´å£ºè£¡åŠ æ»¿äº† 800 æ¯«å‡çš„é‹å‹•é£²æ–™ã€‚",
            questions: [
                { text: "1. è«‹å•å°å‰›åœ¨ç·´ç¿’éç¨‹ä¸­ï¼Œç¸½å…±å–æ‰äº†å¤šå°‘æ¯«å‡çš„æ°´ï¼Ÿ", answer: "700", type: "number" },
                { text: "2. æ•™ç·´åŠ å…¥é‹å‹•é£²æ–™å¾Œï¼Œç¾åœ¨æ°´å£ºè£¡çš„æ¶²é«”ç¸½å…±æœ‰å¤šå°‘æ¯«å‡ï¼Ÿ", answer: "1300", type: "number" },
                { text: "3. åŠ å®Œé‹å‹•é£²æ–™å¾Œï¼Œæ°´å£ºè£¡çš„æ°´æœƒæ»¿å‡ºä¾†å—ï¼Ÿ(è«‹å¡«ï¼šæœƒæˆ–ä¸æœƒ)", answer: "ä¸æœƒ", type: "text" }
            ]
        },
        {
            title: "é¡Œçµ„åï¼šè·³é æ¯”è³½çš„æˆç¸¾å–®",
            icon: icons.ruler,
            image: "https://images.unsplash.com/photo-1587324438697-d51d9eb193f1?auto=format&fit=crop&w=600&q=80",
            story: "æ ¡æ…¶é‹å‹•æœƒèˆ‰è¾¦ç«‹å®šè·³é æ¯”è³½ï¼Œè£åˆ¤æ­£åœ¨è¨˜éŒ„æˆç¸¾ï¼ˆå–®ä½ï¼šå…¬åˆ†ï¼‰ã€‚<br>â— ç¬¬ä¸€åï¼šå°å¼·ï¼Œè·³äº† 185 å…¬åˆ†ã€‚<br>â— ç¬¬äºŒåï¼šå°æ˜ï¼Œè·³äº† 178 å…¬åˆ†ã€‚<br>â— ç¬¬ä¸‰åï¼šå°è¯ï¼Œæˆç¸¾ç´€éŒ„è¢«æ°´å¼„é«’äº†ï¼Œçœ‹èµ·ä¾†æ˜¯ 1â–¡6 å…¬åˆ†ã€‚<br>å·²çŸ¥æ¢ä»¶ï¼šå°è¯æ˜¯ç¬¬ä¸‰åï¼Œä¸”å‰ä¸‰åçš„æˆç¸¾éƒ½ä¸ä¸€æ¨£ã€‚",
            questions: [
                { text: "1. ç¬¬ä¸€åå’Œç¬¬äºŒåçš„æˆç¸¾ç›¸å·®å¤šå°‘å…¬åˆ†ï¼Ÿ", answer: "7", type: "number" },
                { text: "2. å› ç‚ºå°è¯æ˜¯ç¬¬ä¸‰åï¼Œä¸”å€‹ä½æ•¸æ˜¯6ï¼Œè«‹å•â–¡è£¡å¯èƒ½æ˜¯å“ªäº›æ•¸å­—ï¼Ÿ(è«‹å¯«å‡ºæ‰€æœ‰å¯èƒ½æ•¸å­—ï¼Œå¦‚ 123)", answer: "01234567", type: "text", note: "æç¤ºï¼š1â–¡6 å¿…é ˆå°æ–¼ 178" },
                { text: "3. å¦‚æœè£åˆ¤èªªï¼šã€Œå°è¯çš„æˆç¸¾å’Œå°æ˜åªå·®ä¸åˆ° 10 å…¬åˆ†ã€‚ã€é‚£éº¼ â–¡ è£¡çš„æ•¸å­—ç¢ºå®šæ˜¯å¤šå°‘ï¼Ÿ", answer: "7", type: "number" }
            ]
        }
    ];

    let currentSetIndex = 0;
    let score = 0;

    function loadQuiz() {
        const content = document.getElementById('quiz-content');
        const progressBar = document.getElementById('progress');
        const progressText = document.getElementById('progress-text');
        const set = quizData[currentSetIndex];

        // æ›´æ–°é€²åº¦æ¢
        const progressPercent = ((currentSetIndex) / quizData.length) * 100;
        progressBar.style.width = progressPercent + '%';
        progressText.innerText = `Level ${currentSetIndex + 1}/${quizData.length}`;

        // è¼‰å…¥é¡Œç›® HTML (åŠ å…¥åœ–ç‰‡)
        let html = `
            <div class="scenario-box">
                <img src="${set.image}" class="scenario-image" alt="æƒ…å¢ƒåœ–ç¤º" onerror="this.style.display='none'">
                <div class="scenario-header">
                    <div class="scenario-icon">${set.icon}</div>
                    <div class="scenario-title">${set.title}</div>
                </div>
                ${set.story}
            </div>
        `;

        set.questions.forEach((q, index) => {
            // Determine points for display
            let pts = 3;
            if (index === 2) pts = 4;

            html += `
                <div class="question-card" id="card-${index}">
                    <label class="question-text">${q.text} <span class="point-badge">${pts} åˆ†</span></label>
                    <input type="text" id="answer-${index}" placeholder="è«‹è¼¸å…¥ç­”æ¡ˆ" autocomplete="off">
                    ${q.note ? `<div class="note">${q.note}</div>` : ''}
                    <div class="feedback" id="feedback-${index}"></div>
                </div>
            `;
        });

        content.innerHTML = html;
        document.getElementById('submit-btn').style.display = 'block';
        document.getElementById('next-btn').style.display = 'none';
        
        // æ»¾å‹•åˆ°é ‚éƒ¨
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function cleanInput(str) {
        if(!str) return "";
        let s = str.toString().replace(/\s+/g, '');
        s = s.replace(/ï¼Œ/g, ','); 
        s = s.replace(/(å…ƒ|å…¬å‡|æ¯«å‡|å…¬åˆ†|é»|å…¬é‡Œ|æš|å€‹)/g, '');
        return s.toUpperCase();
    }

    function checkAnswers() {
        const set = quizData[currentSetIndex];
        let allCorrect = true;

        set.questions.forEach((q, index) => {
            const inputEl = document.getElementById(`answer-${index}`);
            const userInput = inputEl.value;
            const feedbackEl = document.getElementById(`feedback-${index}`);
            
            const cleanedUserAnswer = cleanInput(userInput);
            const cleanedCorrectAnswer = cleanInput(q.answer);

            let isCorrect = false;
            if (cleanedUserAnswer === cleanedCorrectAnswer) {
                isCorrect = true;
            } 
            else if (cleanedUserAnswer.replace(/,/g, '') === cleanedCorrectAnswer) {
                isCorrect = true;
            }

            // é…åˆ†é‚è¼¯
            let points = 3;
            if (index === 2) points = 4;

            if (isCorrect) {
                feedbackEl.innerHTML = `âœ… ç­”å°äº†ï¼ (+${points}åˆ†)`;
                feedbackEl.className = "feedback correct";
                feedbackEl.style.display = "block";
                score += points;
            } else {
                feedbackEl.innerHTML = `âŒ åŠ æ²¹ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${q.answer}`;
                feedbackEl.className = "feedback incorrect";
                feedbackEl.style.display = "block";
                allCorrect = false;
            }
            
            // é–å®šè¼¸å…¥æ¡†
            inputEl.disabled = true;
        });

        document.getElementById('submit-btn').style.display = 'none';
        document.getElementById('next-btn').style.display = 'block';
    }

    function nextQuestion() {
        currentSetIndex++;
        if (currentSetIndex < quizData.length) {
            loadQuiz();
        } else {
            showResult();
        }
    }

    function showResult() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        
        const finalScoreEl = document.getElementById('final-score');
        const commentEl = document.getElementById('result-comment');
        const badgeEl = document.getElementById('result-badge');

        const maxScore = 100;
        finalScoreEl.innerText = `${score} / ${maxScore}`;

        if (score >= 90) {
            badgeEl.innerText = "ğŸ†";
            commentEl.innerText = "å¤ªå²å®³äº†ï¼ä½ æ˜¯æ•¸å­¸å°å¤©æ‰ï¼";
        } else if (score >= 80) {
            badgeEl.innerText = "ğŸ¥‡";
            commentEl.innerText = "éå¸¸æ£’ï¼é‚è¼¯è§€å¿µå¾ˆæ¸…æ¥šå–”ï¼";
        } else if (score >= 60) {
            badgeEl.innerText = "ğŸ¥ˆ";
            commentEl.innerText = "ä¸éŒ¯å–”ï¼å†å¤šç·´ç¿’ä¸€ä¸‹æœƒæ›´å¼·ï¼";
        } else {
            badgeEl.innerText = "ğŸ’ª";
            commentEl.innerText = "åˆ¥ç°å¿ƒï¼Œå¤šè®€å¹¾æ¬¡é¡Œç›®ï¼Œä½ ä¸€å®šå­¸å¾—æœƒï¼";
        }
    }

    // åˆå§‹åŒ–
    loadQuiz();

</script>

</body>
</html>